description: "This is a serverless code execution example for using a Python container"

# This can be tested usng the following curl command to test:

functions:
- id: python
  image: gcr.io/direktiv/functions/python:1.0
  type: knative-workflow

states:
- id: run-code
  type: action
  action:
    function: python
    input:
      commands:
      - command: pyenv local 3.8.13
      - command: python3 -m pip install -r requirements.txt
      - command: python3 py-tweets.py -b jq(.bearer_token) -t jq(.twitter_searchstring) -m jq(.max_search_returns)
    files:
    - key: py-tweets.py
      scope: workflow
    - key: requirements.txt
      scope: workflow
  transform: jq(.return.python[2])
